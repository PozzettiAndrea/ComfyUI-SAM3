{
  "frames": [
    {
      "file": "frame_000.jpg",
      "time": 0.0,
      "log": "Capturing execution frames: scene_seg.json"
    },
    {
      "file": "frame_001.jpg",
      "time": 0.17,
      "log": "Capturing execution frames: scene_seg.json\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 9 nodes\n  [ComfyUI]   Node 1: LoadImage\n  [ComfyUI]     Inputs: {\"image\": \"image.png\"}\n  [ComfyUI]   Node 3: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"21\", 1]}\n  [ComfyUI]   Node 4: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"21\", 0]}\n  [ComfyUI]   Node 12: LoadSAM3Model\n  [ComfyUI]     Inputs: {\"model_path\": \"models/sam3/sam3.pt\"}\n  [ComfyUI]   Node 20: SAM3MultiRegionCollector\n  [ComfyUI]     Inputs: {\"multi_prompts_store\": \"[{\\\"positive_points\\\":[{\\\"x\\\":5052.74953932266,\\\"y\\\":2847.0600693869637},{\\\"x\\\":4932.510591392486,\\\"y\\\":2953.9413227753366},{\\\"x\\\":4718.752461738845,\\\"y\\\":2967.301479448883},{\n  [ComfyUI]   Node 21: SAM3MultipromptSegmentation\n  [ComfyUI]     Inputs: {\"refinement_iterations\": 2, \"use_multimask\": false, \"offload_model\": false, \"sam3_model\": [\"12\", 0], \"image\": [\"1\", 0], \"multi_prompts\": [\"20\", 0]}\n  [ComfyUI]   Node 22: MultibandFromBatch\n  [ComfyUI]     Inputs: {\"images\": [\"1\", 0], \"masks\": [\"21\", 0]}\n  [ComfyUI]   Node 23: MultibandSave\n  [ComfyUI]     Inputs: {\"file_path\": \"output/multiband\", \"format\": \"npz\", \"multiband\": [\"22\", 0]}\n  [ComfyUI]   Node 24: MultibandPreview\n  [ComfyUI]     Inputs: {\"channel_index\": 0, \"multiband\": [\"22\", 0]}\n  [ComfyUI] Generated prompt_id: ff770ed8-cb4d-43c8-adb3-d5db0f9db961\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] WARNING: 'NoneType' object has no attribute 'shape'"
    },
    {
      "file": "frame_002.jpg",
      "time": 0.65,
      "log": "Capturing execution frames: scene_seg.json\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 9 nodes\n  [ComfyUI]   Node 1: LoadImage\n  [ComfyUI]     Inputs: {\"image\": \"image.png\"}\n  [ComfyUI]   Node 3: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"21\", 1]}\n  [ComfyUI]   Node 4: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"21\", 0]}\n  [ComfyUI]   Node 12: LoadSAM3Model\n  [ComfyUI]     Inputs: {\"model_path\": \"models/sam3/sam3.pt\"}\n  [ComfyUI]   Node 20: SAM3MultiRegionCollector\n  [ComfyUI]     Inputs: {\"multi_prompts_store\": \"[{\\\"positive_points\\\":[{\\\"x\\\":5052.74953932266,\\\"y\\\":2847.0600693869637},{\\\"x\\\":4932.510591392486,\\\"y\\\":2953.9413227753366},{\\\"x\\\":4718.752461738845,\\\"y\\\":2967.301479448883},{\n  [ComfyUI]   Node 21: SAM3MultipromptSegmentation\n  [ComfyUI]     Inputs: {\"refinement_iterations\": 2, \"use_multimask\": false, \"offload_model\": false, \"sam3_model\": [\"12\", 0], \"image\": [\"1\", 0], \"multi_prompts\": [\"20\", 0]}\n  [ComfyUI]   Node 22: MultibandFromBatch\n  [ComfyUI]     Inputs: {\"images\": [\"1\", 0], \"masks\": [\"21\", 0]}\n  [ComfyUI]   Node 23: MultibandSave\n  [ComfyUI]     Inputs: {\"file_path\": \"output/multiband\", \"format\": \"npz\", \"multiband\": [\"22\", 0]}\n  [ComfyUI]   Node 24: MultibandPreview\n  [ComfyUI]     Inputs: {\"channel_index\": 0, \"multiband\": [\"22\", 0]}\n  [ComfyUI] Generated prompt_id: ff770ed8-cb4d-43c8-adb3-d5db0f9db961\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] WARNING: 'NoneType' object has no attribute 'shape'"
    },
    {
      "file": "frame_003.jpg",
      "time": 1.52,
      "log": "Capturing execution frames: scene_seg.json\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 9 nodes\n  [ComfyUI]   Node 1: LoadImage\n  [ComfyUI]     Inputs: {\"image\": \"image.png\"}\n  [ComfyUI]   Node 3: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"21\", 1]}\n  [ComfyUI]   Node 4: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"21\", 0]}\n  [ComfyUI]   Node 12: LoadSAM3Model\n  [ComfyUI]     Inputs: {\"model_path\": \"models/sam3/sam3.pt\"}\n  [ComfyUI]   Node 20: SAM3MultiRegionCollector\n  [ComfyUI]     Inputs: {\"multi_prompts_store\": \"[{\\\"positive_points\\\":[{\\\"x\\\":5052.74953932266,\\\"y\\\":2847.0600693869637},{\\\"x\\\":4932.510591392486,\\\"y\\\":2953.9413227753366},{\\\"x\\\":4718.752461738845,\\\"y\\\":2967.301479448883},{\n  [ComfyUI]   Node 21: SAM3MultipromptSegmentation\n  [ComfyUI]     Inputs: {\"refinement_iterations\": 2, \"use_multimask\": false, \"offload_model\": false, \"sam3_model\": [\"12\", 0], \"image\": [\"1\", 0], \"multi_prompts\": [\"20\", 0]}\n  [ComfyUI]   Node 22: MultibandFromBatch\n  [ComfyUI]     Inputs: {\"images\": [\"1\", 0], \"masks\": [\"21\", 0]}\n  [ComfyUI]   Node 23: MultibandSave\n  [ComfyUI]     Inputs: {\"file_path\": \"output/multiband\", \"format\": \"npz\", \"multiband\": [\"22\", 0]}\n  [ComfyUI]   Node 24: MultibandPreview\n  [ComfyUI]     Inputs: {\"channel_index\": 0, \"multiband\": [\"22\", 0]}\n  [ComfyUI] Generated prompt_id: ff770ed8-cb4d-43c8-adb3-d5db0f9db961\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] WARNING: 'NoneType' object has no attribute 'shape'"
    },
    {
      "file": "frame_004.jpg",
      "time": 61.49,
      "log": "Capturing execution frames: scene_seg.json\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 9 nodes\n  [ComfyUI]   Node 1: LoadImage\n  [ComfyUI]     Inputs: {\"image\": \"image.png\"}\n  [ComfyUI]   Node 3: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"21\", 1]}\n  [ComfyUI]   Node 4: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"21\", 0]}\n  [ComfyUI]   Node 12: LoadSAM3Model\n  [ComfyUI]     Inputs: {\"model_path\": \"models/sam3/sam3.pt\"}\n  [ComfyUI]   Node 20: SAM3MultiRegionCollector\n  [ComfyUI]     Inputs: {\"multi_prompts_store\": \"[{\\\"positive_points\\\":[{\\\"x\\\":5052.74953932266,\\\"y\\\":2847.0600693869637},{\\\"x\\\":4932.510591392486,\\\"y\\\":2953.9413227753366},{\\\"x\\\":4718.752461738845,\\\"y\\\":2967.301479448883},{\n  [ComfyUI]   Node 21: SAM3MultipromptSegmentation\n  [ComfyUI]     Inputs: {\"refinement_iterations\": 2, \"use_multimask\": false, \"offload_model\": false, \"sam3_model\": [\"12\", 0], \"image\": [\"1\", 0], \"multi_prompts\": [\"20\", 0]}\n  [ComfyUI]   Node 22: MultibandFromBatch\n  [ComfyUI]     Inputs: {\"images\": [\"1\", 0], \"masks\": [\"21\", 0]}\n  [ComfyUI]   Node 23: MultibandSave\n  [ComfyUI]     Inputs: {\"file_path\": \"output/multiband\", \"format\": \"npz\", \"multiband\": [\"22\", 0]}\n  [ComfyUI]   Node 24: MultibandPreview\n  [ComfyUI]     Inputs: {\"channel_index\": 0, \"multiband\": [\"22\", 0]}\n  [ComfyUI] Generated prompt_id: ff770ed8-cb4d-43c8-adb3-d5db0f9db961\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] WARNING: 'NoneType' object has no attribute 'shape'\n  [ComfyUI] [SAM3] ComfyUI-SAM3 prestartup script running...\n  [ComfyUI] [SAM3] Script directory: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/custom_nodes/ComfyUI-SAM3\n  [ComfyUI] [SAM3] ComfyUI root: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI\n  [ComfyUI] [SAM3] Copying image assets to /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/input...\n  [ComfyUI] [SAM3] Image assets: 0 copied, 4 skipped\n  [ComfyUI] [SAM3] Prestartup script completed\n  [ComfyUI] [SAM3] ComfyUI-SAM3 v3.0.0 initializing...\n  [ComfyUI] [SAM3] [OK] Registered model folder: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3\n  [ComfyUI] [SAM3] [OK] Node classes imported successfully\n  [ComfyUI] [SAM3 Server] Registered routes: /sam3/prepare, /sam3/detect\n  [ComfyUI] [SAM3] [OK] API endpoints registered\n  [ComfyUI] [SAM3] [OK] Loaded successfully!\n  [ComfyUI] [SAM3] Available nodes: LoadSAM3Model, SAM3Grounding, SAM3Segmentation, SAM3MultipromptSegmentation, SAM3CreateBox, SAM3CreatePoint, SAM3CombineBoxes, SAM3CombinePoints, SAM3VideoSegmentation, SAM3Propagate, SAM3VideoOutput, SAM3PointCollector, SAM3BBoxCollector, SAM3MultiRegionCollector\n  [ComfyUI] [SAM3] Interactive SAM3 Detector: Right-click any IMAGE/MASK node -> 'Open in SAM3 Detector'\n  [ComfyUI] ComfyUI-Multiband loaded: 13 nodes registered\n  [ComfyUI] [SAM3 Multi-Region] CACHE MISS - computing new result for key=35316a77\n  [ComfyUI] [SAM3 Multi-Region] Image dimensions: 6720x4480\n  [ComfyUI] [SAM3 Multi-Region] Processing 7 prompt regions\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 0: 10 pos pts, 0 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 1: 7 pos pts, 16 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 2: 7 pos pts, 14 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 3: 1 pos pts, 0 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 4: 1 pos pts, 0 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 5: 13 pos pts, 0 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 6: 6 pos pts, 0 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region] Output: 7 non-empty prompts\n  [ComfyUI] [SAM3] Load device: cpu, Offload device: cpu\n  [ComfyUI] [SAM3] Model not found at /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3/sam3.pt, downloading from HuggingFace...\n  [ComfyUI] [SAM3] Downloading from 1038lab/sam3...\n  [ComfyUI] [SAM3] Target: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3/sam3.pt\n  [ComfyUI] [SAM3] Model downloaded successfully to: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3/sam3.pt\n  [ComfyUI] [SAM3] Loading unified model from: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3/sam3.pt\n  [ComfyUI] [SAM3] Using BPE tokenizer: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/custom_nodes/ComfyUI-SAM3/nodes/sam3_lib/bpe_simple_vocab_16e6.txt.gz\n  [ComfyUI] [SAM3] Building SAM3 unified model...\n  [ComfyUI] [SAM3] Loading PyTorch checkpoint: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3/sam3.pt\n  [ComfyUI] [SAM3] Added 309 keys for detector.inst_interactive_predictor\n  [ComfyUI] [SAM3] Video predictor loaded successfully\n  [ComfyUI] [SAM3] Creating SAM3 processor...\n  [ComfyUI] [SAM3] Processor created successfully\n  [ComfyUI] [SAM3] Unified model ready (size: 3289.9 MB)\n  [ComfyUI] [SAM3 Multiprompt] Image size: (6720, 4480)\n  [ComfyUI] [SAM3 Multiprompt] Processing 7 prompt regions\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 1/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 10, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9808\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 2/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 23, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9411\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 3/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 21, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.8921\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 4/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 1, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9751\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 5/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 1, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9855\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 6/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 13, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9895\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 7/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 6, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9695\n  [ComfyUI] [SAM3 Multiprompt] Generated 7 masks\n  [ComfyUI] BatchToMultiband: Processed 1 images with 3 channels each -> 3 channels\n  [ComfyUI] BatchToMultiband: Processed 7 masks -> 7 channels\n  [ComfyUI] BatchToMultiband: Output shape torch.Size([1, 10, 4480, 6720]), channels: ['img_01_r', 'img_01_g', 'img_01_b', 'mask_01', 'mask_02', 'mask_03', 'mask_04', 'mask_05', 'mask_06', 'mask_07']\n  [ComfyUI] SaveMultibandImage: Saved to output/multiband.npz\n  [ComfyUI]   Shape: (1, 10, 4480, 6720)\n  [ComfyUI]   Format: npz\n  [ComfyUI] PreviewMultibandImage: Batch=1, Channels=10, Names=['img_01_r', 'img_01_g', 'img_01_b', 'mask_01', 'mask_02', 'mask_03', 'mask_04', 'mask_05', 'mask_06', 'mask_07']\n  [ComfyUI] [SAM3 Point Collector] CACHE MISS - computing new result for key=d9204c29\n  [ComfyUI] [SAM3 Point Collector] Collected 3 positive, 0 negative points\n  [ComfyUI] [SAM3 Point Collector] Image dimensions: 1280x720\n  [ComfyUI] [SAM3 Point Collector]   Positive point: (426.3, 321.4) -> (0.333, 0.446)\n  [ComfyUI] [SAM3 Point Collector]   Positive point: (417.1, 407.3) -> (0.326, 0.566)\n  [ComfyUI] [SAM3 Point Collector]   Positive point: (431.8, 549.9) -> (0.337, 0.764)\n  [ComfyUI] [SAM3 Point Collector] Output: 3 positive, 0 negative\n  [ComfyUI] [SAM3 Segmentation] Using click-based interactive segmentation\n  [ComfyUI] [SAM3 Segmentation] Image size: (1280, 720)\n  [ComfyUI] [SAM3 Segmentation] sam2_backbone_out is available\n  [ComfyUI] [SAM3 Segmentation] Added 3 positive points\n  [ComfyUI] [SAM3 Segmentation] Points: 3\n  [ComfyUI] [SAM3 Segmentation]   Coords: [[426.27735719657574, 321.42611685978835], [417.13743597288953, 407.3413796907987], [431.76130993078743, 549.9241563039649]]\n  [ComfyUI] [SAM3 Segmentation]   Labels: [1, 1, 1]\n  [ComfyUI] [SAM3 Segmentation] Prediction returned 1 masks\n  [ComfyUI] [SAM3 Segmentation]   Mask shape: (1, 720, 1280)\n  [ComfyUI] [SAM3 Segmentation]   Low-res shape: (1, 288, 288)\n  [ComfyUI] [SAM3 Segmentation]   Scores: [0.9594941735267639]\n  [ComfyUI] [SAM3 Segmentation] Outputting all 1 mask candidates\n  [ComfyUI] [SAM3 Segmentation] Segmentation complete\n  [ComfyUI] [SAM3 Segmentation] Using click-based interactive segmentation\n  [ComfyUI] [SAM3 Segmentation] Image size: (1280, 720)\n  [ComfyUI] [SAM3 Segmentation] sam2_backbone_out is available\n  [ComfyUI] [SAM3 Segmentation] Added 3 positive points\n  [ComfyUI] [SAM3 Segmentation] Points: 3\n  [ComfyUI] [SAM3 Segmentation]   Coords: [[426.27735719657574, 321.42611685978835], [417.13743597288953, 407.3413796907987], [431.76130993078743, 549.9241563039649]]\n  [ComfyUI] [SAM3 Segmentation]   Labels: [1, 1, 1]\n  [ComfyUI] [SAM3 Segmentation] Refinement 1/4, best score: 0.9636\n  [ComfyUI] [SAM3 Segmentation] Refinement 2/4, best score: 0.9690\n  [ComfyUI] [SAM3 Segmentation] Refinement 3/4, best score: 0.9691\n  [ComfyUI] [SAM3 Segmentation] Refinement 4/4, best score: 0.9697\n  [ComfyUI] [SAM3 Segmentation] Prediction returned 1 masks\n  [ComfyUI] [SAM3 Segmentation]   Mask shape: (1, 720, 1280)\n  [ComfyUI] [SAM3 Segmentation]   Low-res shape: (1, 288, 288)\n  [ComfyUI] [SAM3 Segmentation]   Scores: [0.9696518182754517]\n  [ComfyUI] [SAM3 Segmentation] Outputting all 1 mask candidates\n  [ComfyUI] [SAM3 Segmentation] Segmentation complete\n  [ComfyUI] [SAM3 Grounding] Running text-based detection\n  [ComfyUI] [SAM3 Grounding]   Text prompt: 'person'\n  [ComfyUI] [SAM3 Grounding] Confidence threshold: 0.2\n  [ComfyUI] [SAM3 Grounding] Image size: (1280, 720)\n  [ComfyUI] [SAM3 Grounding] Adding text prompt...\n  [ComfyUI] [SAM3 Grounding] No detections found for prompt: 'person' at threshold 0.2\n  [ComfyUI] [SAM3 Grounding] TIP: Try lowering the confidence_threshold or check if the object is in the image\n  [ComfyUI] [SAM3 Multi-Region] CACHE HIT - returning cached result for key=35316a77\n  [ComfyUI] [SAM3 Multiprompt] Image size: (6720, 4480)\n  [ComfyUI] [SAM3 Multiprompt] Processing 7 prompt regions\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 1/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 10, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9808\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 2/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 23, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9411\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 3/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 21, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.8921\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 4/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 1, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9751\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 5/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 1, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9855\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 6/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 13, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9895"
    },
    {
      "file": "frame_005.jpg",
      "time": 65.15,
      "log": "Capturing execution frames: scene_seg.json\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 9 nodes\n  [ComfyUI]   Node 1: LoadImage\n  [ComfyUI]     Inputs: {\"image\": \"image.png\"}\n  [ComfyUI]   Node 3: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"21\", 1]}\n  [ComfyUI]   Node 4: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"21\", 0]}\n  [ComfyUI]   Node 12: LoadSAM3Model\n  [ComfyUI]     Inputs: {\"model_path\": \"models/sam3/sam3.pt\"}\n  [ComfyUI]   Node 20: SAM3MultiRegionCollector\n  [ComfyUI]     Inputs: {\"multi_prompts_store\": \"[{\\\"positive_points\\\":[{\\\"x\\\":5052.74953932266,\\\"y\\\":2847.0600693869637},{\\\"x\\\":4932.510591392486,\\\"y\\\":2953.9413227753366},{\\\"x\\\":4718.752461738845,\\\"y\\\":2967.301479448883},{\n  [ComfyUI]   Node 21: SAM3MultipromptSegmentation\n  [ComfyUI]     Inputs: {\"refinement_iterations\": 2, \"use_multimask\": false, \"offload_model\": false, \"sam3_model\": [\"12\", 0], \"image\": [\"1\", 0], \"multi_prompts\": [\"20\", 0]}\n  [ComfyUI]   Node 22: MultibandFromBatch\n  [ComfyUI]     Inputs: {\"images\": [\"1\", 0], \"masks\": [\"21\", 0]}\n  [ComfyUI]   Node 23: MultibandSave\n  [ComfyUI]     Inputs: {\"file_path\": \"output/multiband\", \"format\": \"npz\", \"multiband\": [\"22\", 0]}\n  [ComfyUI]   Node 24: MultibandPreview\n  [ComfyUI]     Inputs: {\"channel_index\": 0, \"multiband\": [\"22\", 0]}\n  [ComfyUI] Generated prompt_id: ff770ed8-cb4d-43c8-adb3-d5db0f9db961\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] WARNING: 'NoneType' object has no attribute 'shape'\n  [ComfyUI] [SAM3] ComfyUI-SAM3 prestartup script running...\n  [ComfyUI] [SAM3] Script directory: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/custom_nodes/ComfyUI-SAM3\n  [ComfyUI] [SAM3] ComfyUI root: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI\n  [ComfyUI] [SAM3] Copying image assets to /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/input...\n  [ComfyUI] [SAM3] Image assets: 0 copied, 4 skipped\n  [ComfyUI] [SAM3] Prestartup script completed\n  [ComfyUI] [SAM3] ComfyUI-SAM3 v3.0.0 initializing...\n  [ComfyUI] [SAM3] [OK] Registered model folder: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3\n  [ComfyUI] [SAM3] [OK] Node classes imported successfully\n  [ComfyUI] [SAM3 Server] Registered routes: /sam3/prepare, /sam3/detect\n  [ComfyUI] [SAM3] [OK] API endpoints registered\n  [ComfyUI] [SAM3] [OK] Loaded successfully!\n  [ComfyUI] [SAM3] Available nodes: LoadSAM3Model, SAM3Grounding, SAM3Segmentation, SAM3MultipromptSegmentation, SAM3CreateBox, SAM3CreatePoint, SAM3CombineBoxes, SAM3CombinePoints, SAM3VideoSegmentation, SAM3Propagate, SAM3VideoOutput, SAM3PointCollector, SAM3BBoxCollector, SAM3MultiRegionCollector\n  [ComfyUI] [SAM3] Interactive SAM3 Detector: Right-click any IMAGE/MASK node -> 'Open in SAM3 Detector'\n  [ComfyUI] ComfyUI-Multiband loaded: 13 nodes registered\n  [ComfyUI] [SAM3 Multi-Region] CACHE MISS - computing new result for key=35316a77\n  [ComfyUI] [SAM3 Multi-Region] Image dimensions: 6720x4480\n  [ComfyUI] [SAM3 Multi-Region] Processing 7 prompt regions\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 0: 10 pos pts, 0 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 1: 7 pos pts, 16 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 2: 7 pos pts, 14 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 3: 1 pos pts, 0 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 4: 1 pos pts, 0 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 5: 13 pos pts, 0 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 6: 6 pos pts, 0 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region] Output: 7 non-empty prompts\n  [ComfyUI] [SAM3] Load device: cpu, Offload device: cpu\n  [ComfyUI] [SAM3] Model not found at /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3/sam3.pt, downloading from HuggingFace...\n  [ComfyUI] [SAM3] Downloading from 1038lab/sam3...\n  [ComfyUI] [SAM3] Target: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3/sam3.pt\n  [ComfyUI] [SAM3] Model downloaded successfully to: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3/sam3.pt\n  [ComfyUI] [SAM3] Loading unified model from: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3/sam3.pt\n  [ComfyUI] [SAM3] Using BPE tokenizer: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/custom_nodes/ComfyUI-SAM3/nodes/sam3_lib/bpe_simple_vocab_16e6.txt.gz\n  [ComfyUI] [SAM3] Building SAM3 unified model...\n  [ComfyUI] [SAM3] Loading PyTorch checkpoint: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3/sam3.pt\n  [ComfyUI] [SAM3] Added 309 keys for detector.inst_interactive_predictor\n  [ComfyUI] [SAM3] Video predictor loaded successfully\n  [ComfyUI] [SAM3] Creating SAM3 processor...\n  [ComfyUI] [SAM3] Processor created successfully\n  [ComfyUI] [SAM3] Unified model ready (size: 3289.9 MB)\n  [ComfyUI] [SAM3 Multiprompt] Image size: (6720, 4480)\n  [ComfyUI] [SAM3 Multiprompt] Processing 7 prompt regions\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 1/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 10, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9808\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 2/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 23, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9411\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 3/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 21, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.8921\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 4/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 1, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9751\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 5/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 1, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9855\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 6/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 13, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9895\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 7/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 6, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9695\n  [ComfyUI] [SAM3 Multiprompt] Generated 7 masks\n  [ComfyUI] BatchToMultiband: Processed 1 images with 3 channels each -> 3 channels\n  [ComfyUI] BatchToMultiband: Processed 7 masks -> 7 channels\n  [ComfyUI] BatchToMultiband: Output shape torch.Size([1, 10, 4480, 6720]), channels: ['img_01_r', 'img_01_g', 'img_01_b', 'mask_01', 'mask_02', 'mask_03', 'mask_04', 'mask_05', 'mask_06', 'mask_07']\n  [ComfyUI] SaveMultibandImage: Saved to output/multiband.npz\n  [ComfyUI]   Shape: (1, 10, 4480, 6720)\n  [ComfyUI]   Format: npz\n  [ComfyUI] PreviewMultibandImage: Batch=1, Channels=10, Names=['img_01_r', 'img_01_g', 'img_01_b', 'mask_01', 'mask_02', 'mask_03', 'mask_04', 'mask_05', 'mask_06', 'mask_07']\n  [ComfyUI] [SAM3 Point Collector] CACHE MISS - computing new result for key=d9204c29\n  [ComfyUI] [SAM3 Point Collector] Collected 3 positive, 0 negative points\n  [ComfyUI] [SAM3 Point Collector] Image dimensions: 1280x720\n  [ComfyUI] [SAM3 Point Collector]   Positive point: (426.3, 321.4) -> (0.333, 0.446)\n  [ComfyUI] [SAM3 Point Collector]   Positive point: (417.1, 407.3) -> (0.326, 0.566)\n  [ComfyUI] [SAM3 Point Collector]   Positive point: (431.8, 549.9) -> (0.337, 0.764)\n  [ComfyUI] [SAM3 Point Collector] Output: 3 positive, 0 negative\n  [ComfyUI] [SAM3 Segmentation] Using click-based interactive segmentation\n  [ComfyUI] [SAM3 Segmentation] Image size: (1280, 720)\n  [ComfyUI] [SAM3 Segmentation] sam2_backbone_out is available\n  [ComfyUI] [SAM3 Segmentation] Added 3 positive points\n  [ComfyUI] [SAM3 Segmentation] Points: 3\n  [ComfyUI] [SAM3 Segmentation]   Coords: [[426.27735719657574, 321.42611685978835], [417.13743597288953, 407.3413796907987], [431.76130993078743, 549.9241563039649]]\n  [ComfyUI] [SAM3 Segmentation]   Labels: [1, 1, 1]\n  [ComfyUI] [SAM3 Segmentation] Prediction returned 1 masks\n  [ComfyUI] [SAM3 Segmentation]   Mask shape: (1, 720, 1280)\n  [ComfyUI] [SAM3 Segmentation]   Low-res shape: (1, 288, 288)\n  [ComfyUI] [SAM3 Segmentation]   Scores: [0.9594941735267639]\n  [ComfyUI] [SAM3 Segmentation] Outputting all 1 mask candidates\n  [ComfyUI] [SAM3 Segmentation] Segmentation complete\n  [ComfyUI] [SAM3 Segmentation] Using click-based interactive segmentation\n  [ComfyUI] [SAM3 Segmentation] Image size: (1280, 720)\n  [ComfyUI] [SAM3 Segmentation] sam2_backbone_out is available\n  [ComfyUI] [SAM3 Segmentation] Added 3 positive points\n  [ComfyUI] [SAM3 Segmentation] Points: 3\n  [ComfyUI] [SAM3 Segmentation]   Coords: [[426.27735719657574, 321.42611685978835], [417.13743597288953, 407.3413796907987], [431.76130993078743, 549.9241563039649]]\n  [ComfyUI] [SAM3 Segmentation]   Labels: [1, 1, 1]\n  [ComfyUI] [SAM3 Segmentation] Refinement 1/4, best score: 0.9636\n  [ComfyUI] [SAM3 Segmentation] Refinement 2/4, best score: 0.9690\n  [ComfyUI] [SAM3 Segmentation] Refinement 3/4, best score: 0.9691\n  [ComfyUI] [SAM3 Segmentation] Refinement 4/4, best score: 0.9697\n  [ComfyUI] [SAM3 Segmentation] Prediction returned 1 masks\n  [ComfyUI] [SAM3 Segmentation]   Mask shape: (1, 720, 1280)\n  [ComfyUI] [SAM3 Segmentation]   Low-res shape: (1, 288, 288)\n  [ComfyUI] [SAM3 Segmentation]   Scores: [0.9696518182754517]\n  [ComfyUI] [SAM3 Segmentation] Outputting all 1 mask candidates\n  [ComfyUI] [SAM3 Segmentation] Segmentation complete\n  [ComfyUI] [SAM3 Grounding] Running text-based detection\n  [ComfyUI] [SAM3 Grounding]   Text prompt: 'person'\n  [ComfyUI] [SAM3 Grounding] Confidence threshold: 0.2\n  [ComfyUI] [SAM3 Grounding] Image size: (1280, 720)\n  [ComfyUI] [SAM3 Grounding] Adding text prompt...\n  [ComfyUI] [SAM3 Grounding] No detections found for prompt: 'person' at threshold 0.2\n  [ComfyUI] [SAM3 Grounding] TIP: Try lowering the confidence_threshold or check if the object is in the image\n  [ComfyUI] [SAM3 Multi-Region] CACHE HIT - returning cached result for key=35316a77\n  [ComfyUI] [SAM3 Multiprompt] Image size: (6720, 4480)\n  [ComfyUI] [SAM3 Multiprompt] Processing 7 prompt regions\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 1/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 10, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9808\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 2/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 23, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9411\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 3/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 21, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.8921\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 4/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 1, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9751\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 5/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 1, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9855\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 6/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 13, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9895"
    },
    {
      "file": "frame_006.jpg",
      "time": 69.44,
      "log": "Capturing execution frames: scene_seg.json\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 9 nodes\n  [ComfyUI]   Node 1: LoadImage\n  [ComfyUI]     Inputs: {\"image\": \"image.png\"}\n  [ComfyUI]   Node 3: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"21\", 1]}\n  [ComfyUI]   Node 4: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"21\", 0]}\n  [ComfyUI]   Node 12: LoadSAM3Model\n  [ComfyUI]     Inputs: {\"model_path\": \"models/sam3/sam3.pt\"}\n  [ComfyUI]   Node 20: SAM3MultiRegionCollector\n  [ComfyUI]     Inputs: {\"multi_prompts_store\": \"[{\\\"positive_points\\\":[{\\\"x\\\":5052.74953932266,\\\"y\\\":2847.0600693869637},{\\\"x\\\":4932.510591392486,\\\"y\\\":2953.9413227753366},{\\\"x\\\":4718.752461738845,\\\"y\\\":2967.301479448883},{\n  [ComfyUI]   Node 21: SAM3MultipromptSegmentation\n  [ComfyUI]     Inputs: {\"refinement_iterations\": 2, \"use_multimask\": false, \"offload_model\": false, \"sam3_model\": [\"12\", 0], \"image\": [\"1\", 0], \"multi_prompts\": [\"20\", 0]}\n  [ComfyUI]   Node 22: MultibandFromBatch\n  [ComfyUI]     Inputs: {\"images\": [\"1\", 0], \"masks\": [\"21\", 0]}\n  [ComfyUI]   Node 23: MultibandSave\n  [ComfyUI]     Inputs: {\"file_path\": \"output/multiband\", \"format\": \"npz\", \"multiband\": [\"22\", 0]}\n  [ComfyUI]   Node 24: MultibandPreview\n  [ComfyUI]     Inputs: {\"channel_index\": 0, \"multiband\": [\"22\", 0]}\n  [ComfyUI] Generated prompt_id: ff770ed8-cb4d-43c8-adb3-d5db0f9db961\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] WARNING: 'NoneType' object has no attribute 'shape'\n  [ComfyUI] [SAM3] ComfyUI-SAM3 prestartup script running...\n  [ComfyUI] [SAM3] Script directory: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/custom_nodes/ComfyUI-SAM3\n  [ComfyUI] [SAM3] ComfyUI root: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI\n  [ComfyUI] [SAM3] Copying image assets to /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/input...\n  [ComfyUI] [SAM3] Image assets: 0 copied, 4 skipped\n  [ComfyUI] [SAM3] Prestartup script completed\n  [ComfyUI] [SAM3] ComfyUI-SAM3 v3.0.0 initializing...\n  [ComfyUI] [SAM3] [OK] Registered model folder: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3\n  [ComfyUI] [SAM3] [OK] Node classes imported successfully\n  [ComfyUI] [SAM3 Server] Registered routes: /sam3/prepare, /sam3/detect\n  [ComfyUI] [SAM3] [OK] API endpoints registered\n  [ComfyUI] [SAM3] [OK] Loaded successfully!\n  [ComfyUI] [SAM3] Available nodes: LoadSAM3Model, SAM3Grounding, SAM3Segmentation, SAM3MultipromptSegmentation, SAM3CreateBox, SAM3CreatePoint, SAM3CombineBoxes, SAM3CombinePoints, SAM3VideoSegmentation, SAM3Propagate, SAM3VideoOutput, SAM3PointCollector, SAM3BBoxCollector, SAM3MultiRegionCollector\n  [ComfyUI] [SAM3] Interactive SAM3 Detector: Right-click any IMAGE/MASK node -> 'Open in SAM3 Detector'\n  [ComfyUI] ComfyUI-Multiband loaded: 13 nodes registered\n  [ComfyUI] [SAM3 Multi-Region] CACHE MISS - computing new result for key=35316a77\n  [ComfyUI] [SAM3 Multi-Region] Image dimensions: 6720x4480\n  [ComfyUI] [SAM3 Multi-Region] Processing 7 prompt regions\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 0: 10 pos pts, 0 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 1: 7 pos pts, 16 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 2: 7 pos pts, 14 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 3: 1 pos pts, 0 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 4: 1 pos pts, 0 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 5: 13 pos pts, 0 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 6: 6 pos pts, 0 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region] Output: 7 non-empty prompts\n  [ComfyUI] [SAM3] Load device: cpu, Offload device: cpu\n  [ComfyUI] [SAM3] Model not found at /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3/sam3.pt, downloading from HuggingFace...\n  [ComfyUI] [SAM3] Downloading from 1038lab/sam3...\n  [ComfyUI] [SAM3] Target: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3/sam3.pt\n  [ComfyUI] [SAM3] Model downloaded successfully to: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3/sam3.pt\n  [ComfyUI] [SAM3] Loading unified model from: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3/sam3.pt\n  [ComfyUI] [SAM3] Using BPE tokenizer: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/custom_nodes/ComfyUI-SAM3/nodes/sam3_lib/bpe_simple_vocab_16e6.txt.gz\n  [ComfyUI] [SAM3] Building SAM3 unified model...\n  [ComfyUI] [SAM3] Loading PyTorch checkpoint: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3/sam3.pt\n  [ComfyUI] [SAM3] Added 309 keys for detector.inst_interactive_predictor\n  [ComfyUI] [SAM3] Video predictor loaded successfully\n  [ComfyUI] [SAM3] Creating SAM3 processor...\n  [ComfyUI] [SAM3] Processor created successfully\n  [ComfyUI] [SAM3] Unified model ready (size: 3289.9 MB)\n  [ComfyUI] [SAM3 Multiprompt] Image size: (6720, 4480)\n  [ComfyUI] [SAM3 Multiprompt] Processing 7 prompt regions\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 1/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 10, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9808\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 2/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 23, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9411\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 3/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 21, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.8921\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 4/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 1, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9751\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 5/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 1, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9855\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 6/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 13, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9895\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 7/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 6, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9695\n  [ComfyUI] [SAM3 Multiprompt] Generated 7 masks\n  [ComfyUI] BatchToMultiband: Processed 1 images with 3 channels each -> 3 channels\n  [ComfyUI] BatchToMultiband: Processed 7 masks -> 7 channels\n  [ComfyUI] BatchToMultiband: Output shape torch.Size([1, 10, 4480, 6720]), channels: ['img_01_r', 'img_01_g', 'img_01_b', 'mask_01', 'mask_02', 'mask_03', 'mask_04', 'mask_05', 'mask_06', 'mask_07']\n  [ComfyUI] SaveMultibandImage: Saved to output/multiband.npz\n  [ComfyUI]   Shape: (1, 10, 4480, 6720)\n  [ComfyUI]   Format: npz\n  [ComfyUI] PreviewMultibandImage: Batch=1, Channels=10, Names=['img_01_r', 'img_01_g', 'img_01_b', 'mask_01', 'mask_02', 'mask_03', 'mask_04', 'mask_05', 'mask_06', 'mask_07']\n  [ComfyUI] [SAM3 Point Collector] CACHE MISS - computing new result for key=d9204c29\n  [ComfyUI] [SAM3 Point Collector] Collected 3 positive, 0 negative points\n  [ComfyUI] [SAM3 Point Collector] Image dimensions: 1280x720\n  [ComfyUI] [SAM3 Point Collector]   Positive point: (426.3, 321.4) -> (0.333, 0.446)\n  [ComfyUI] [SAM3 Point Collector]   Positive point: (417.1, 407.3) -> (0.326, 0.566)\n  [ComfyUI] [SAM3 Point Collector]   Positive point: (431.8, 549.9) -> (0.337, 0.764)\n  [ComfyUI] [SAM3 Point Collector] Output: 3 positive, 0 negative\n  [ComfyUI] [SAM3 Segmentation] Using click-based interactive segmentation\n  [ComfyUI] [SAM3 Segmentation] Image size: (1280, 720)\n  [ComfyUI] [SAM3 Segmentation] sam2_backbone_out is available\n  [ComfyUI] [SAM3 Segmentation] Added 3 positive points\n  [ComfyUI] [SAM3 Segmentation] Points: 3\n  [ComfyUI] [SAM3 Segmentation]   Coords: [[426.27735719657574, 321.42611685978835], [417.13743597288953, 407.3413796907987], [431.76130993078743, 549.9241563039649]]\n  [ComfyUI] [SAM3 Segmentation]   Labels: [1, 1, 1]\n  [ComfyUI] [SAM3 Segmentation] Prediction returned 1 masks\n  [ComfyUI] [SAM3 Segmentation]   Mask shape: (1, 720, 1280)\n  [ComfyUI] [SAM3 Segmentation]   Low-res shape: (1, 288, 288)\n  [ComfyUI] [SAM3 Segmentation]   Scores: [0.9594941735267639]\n  [ComfyUI] [SAM3 Segmentation] Outputting all 1 mask candidates\n  [ComfyUI] [SAM3 Segmentation] Segmentation complete\n  [ComfyUI] [SAM3 Segmentation] Using click-based interactive segmentation\n  [ComfyUI] [SAM3 Segmentation] Image size: (1280, 720)\n  [ComfyUI] [SAM3 Segmentation] sam2_backbone_out is available\n  [ComfyUI] [SAM3 Segmentation] Added 3 positive points\n  [ComfyUI] [SAM3 Segmentation] Points: 3\n  [ComfyUI] [SAM3 Segmentation]   Coords: [[426.27735719657574, 321.42611685978835], [417.13743597288953, 407.3413796907987], [431.76130993078743, 549.9241563039649]]\n  [ComfyUI] [SAM3 Segmentation]   Labels: [1, 1, 1]\n  [ComfyUI] [SAM3 Segmentation] Refinement 1/4, best score: 0.9636\n  [ComfyUI] [SAM3 Segmentation] Refinement 2/4, best score: 0.9690\n  [ComfyUI] [SAM3 Segmentation] Refinement 3/4, best score: 0.9691\n  [ComfyUI] [SAM3 Segmentation] Refinement 4/4, best score: 0.9697\n  [ComfyUI] [SAM3 Segmentation] Prediction returned 1 masks\n  [ComfyUI] [SAM3 Segmentation]   Mask shape: (1, 720, 1280)\n  [ComfyUI] [SAM3 Segmentation]   Low-res shape: (1, 288, 288)\n  [ComfyUI] [SAM3 Segmentation]   Scores: [0.9696518182754517]\n  [ComfyUI] [SAM3 Segmentation] Outputting all 1 mask candidates\n  [ComfyUI] [SAM3 Segmentation] Segmentation complete\n  [ComfyUI] [SAM3 Grounding] Running text-based detection\n  [ComfyUI] [SAM3 Grounding]   Text prompt: 'person'\n  [ComfyUI] [SAM3 Grounding] Confidence threshold: 0.2\n  [ComfyUI] [SAM3 Grounding] Image size: (1280, 720)\n  [ComfyUI] [SAM3 Grounding] Adding text prompt...\n  [ComfyUI] [SAM3 Grounding] No detections found for prompt: 'person' at threshold 0.2\n  [ComfyUI] [SAM3 Grounding] TIP: Try lowering the confidence_threshold or check if the object is in the image\n  [ComfyUI] [SAM3 Multi-Region] CACHE HIT - returning cached result for key=35316a77\n  [ComfyUI] [SAM3 Multiprompt] Image size: (6720, 4480)\n  [ComfyUI] [SAM3 Multiprompt] Processing 7 prompt regions\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 1/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 10, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9808\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 2/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 23, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9411\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 3/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 21, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.8921\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 4/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 1, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9751\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 5/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 1, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9855\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 6/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 13, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9895"
    },
    {
      "file": "frame_007.jpg",
      "time": 91.36,
      "log": "Capturing execution frames: scene_seg.json\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 9 nodes\n  [ComfyUI]   Node 1: LoadImage\n  [ComfyUI]     Inputs: {\"image\": \"image.png\"}\n  [ComfyUI]   Node 3: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"21\", 1]}\n  [ComfyUI]   Node 4: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"21\", 0]}\n  [ComfyUI]   Node 12: LoadSAM3Model\n  [ComfyUI]     Inputs: {\"model_path\": \"models/sam3/sam3.pt\"}\n  [ComfyUI]   Node 20: SAM3MultiRegionCollector\n  [ComfyUI]     Inputs: {\"multi_prompts_store\": \"[{\\\"positive_points\\\":[{\\\"x\\\":5052.74953932266,\\\"y\\\":2847.0600693869637},{\\\"x\\\":4932.510591392486,\\\"y\\\":2953.9413227753366},{\\\"x\\\":4718.752461738845,\\\"y\\\":2967.301479448883},{\n  [ComfyUI]   Node 21: SAM3MultipromptSegmentation\n  [ComfyUI]     Inputs: {\"refinement_iterations\": 2, \"use_multimask\": false, \"offload_model\": false, \"sam3_model\": [\"12\", 0], \"image\": [\"1\", 0], \"multi_prompts\": [\"20\", 0]}\n  [ComfyUI]   Node 22: MultibandFromBatch\n  [ComfyUI]     Inputs: {\"images\": [\"1\", 0], \"masks\": [\"21\", 0]}\n  [ComfyUI]   Node 23: MultibandSave\n  [ComfyUI]     Inputs: {\"file_path\": \"output/multiband\", \"format\": \"npz\", \"multiband\": [\"22\", 0]}\n  [ComfyUI]   Node 24: MultibandPreview\n  [ComfyUI]     Inputs: {\"channel_index\": 0, \"multiband\": [\"22\", 0]}\n  [ComfyUI] Generated prompt_id: ff770ed8-cb4d-43c8-adb3-d5db0f9db961\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] WARNING: 'NoneType' object has no attribute 'shape'\n  [ComfyUI] [SAM3] ComfyUI-SAM3 prestartup script running...\n  [ComfyUI] [SAM3] Script directory: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/custom_nodes/ComfyUI-SAM3\n  [ComfyUI] [SAM3] ComfyUI root: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI\n  [ComfyUI] [SAM3] Copying image assets to /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/input...\n  [ComfyUI] [SAM3] Image assets: 0 copied, 4 skipped\n  [ComfyUI] [SAM3] Prestartup script completed\n  [ComfyUI] [SAM3] ComfyUI-SAM3 v3.0.0 initializing...\n  [ComfyUI] [SAM3] [OK] Registered model folder: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3\n  [ComfyUI] [SAM3] [OK] Node classes imported successfully\n  [ComfyUI] [SAM3 Server] Registered routes: /sam3/prepare, /sam3/detect\n  [ComfyUI] [SAM3] [OK] API endpoints registered\n  [ComfyUI] [SAM3] [OK] Loaded successfully!\n  [ComfyUI] [SAM3] Available nodes: LoadSAM3Model, SAM3Grounding, SAM3Segmentation, SAM3MultipromptSegmentation, SAM3CreateBox, SAM3CreatePoint, SAM3CombineBoxes, SAM3CombinePoints, SAM3VideoSegmentation, SAM3Propagate, SAM3VideoOutput, SAM3PointCollector, SAM3BBoxCollector, SAM3MultiRegionCollector\n  [ComfyUI] [SAM3] Interactive SAM3 Detector: Right-click any IMAGE/MASK node -> 'Open in SAM3 Detector'\n  [ComfyUI] ComfyUI-Multiband loaded: 13 nodes registered\n  [ComfyUI] [SAM3 Multi-Region] CACHE MISS - computing new result for key=35316a77\n  [ComfyUI] [SAM3 Multi-Region] Image dimensions: 6720x4480\n  [ComfyUI] [SAM3 Multi-Region] Processing 7 prompt regions\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 0: 10 pos pts, 0 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 1: 7 pos pts, 16 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 2: 7 pos pts, 14 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 3: 1 pos pts, 0 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 4: 1 pos pts, 0 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 5: 13 pos pts, 0 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 6: 6 pos pts, 0 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region] Output: 7 non-empty prompts\n  [ComfyUI] [SAM3] Load device: cpu, Offload device: cpu\n  [ComfyUI] [SAM3] Model not found at /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3/sam3.pt, downloading from HuggingFace...\n  [ComfyUI] [SAM3] Downloading from 1038lab/sam3...\n  [ComfyUI] [SAM3] Target: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3/sam3.pt\n  [ComfyUI] [SAM3] Model downloaded successfully to: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3/sam3.pt\n  [ComfyUI] [SAM3] Loading unified model from: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3/sam3.pt\n  [ComfyUI] [SAM3] Using BPE tokenizer: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/custom_nodes/ComfyUI-SAM3/nodes/sam3_lib/bpe_simple_vocab_16e6.txt.gz\n  [ComfyUI] [SAM3] Building SAM3 unified model...\n  [ComfyUI] [SAM3] Loading PyTorch checkpoint: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3/sam3.pt\n  [ComfyUI] [SAM3] Added 309 keys for detector.inst_interactive_predictor\n  [ComfyUI] [SAM3] Video predictor loaded successfully\n  [ComfyUI] [SAM3] Creating SAM3 processor...\n  [ComfyUI] [SAM3] Processor created successfully\n  [ComfyUI] [SAM3] Unified model ready (size: 3289.9 MB)\n  [ComfyUI] [SAM3 Multiprompt] Image size: (6720, 4480)\n  [ComfyUI] [SAM3 Multiprompt] Processing 7 prompt regions\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 1/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 10, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9808\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 2/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 23, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9411\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 3/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 21, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.8921\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 4/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 1, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9751\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 5/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 1, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9855\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 6/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 13, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9895\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 7/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 6, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9695\n  [ComfyUI] [SAM3 Multiprompt] Generated 7 masks\n  [ComfyUI] BatchToMultiband: Processed 1 images with 3 channels each -> 3 channels\n  [ComfyUI] BatchToMultiband: Processed 7 masks -> 7 channels\n  [ComfyUI] BatchToMultiband: Output shape torch.Size([1, 10, 4480, 6720]), channels: ['img_01_r', 'img_01_g', 'img_01_b', 'mask_01', 'mask_02', 'mask_03', 'mask_04', 'mask_05', 'mask_06', 'mask_07']\n  [ComfyUI] SaveMultibandImage: Saved to output/multiband.npz\n  [ComfyUI]   Shape: (1, 10, 4480, 6720)\n  [ComfyUI]   Format: npz\n  [ComfyUI] PreviewMultibandImage: Batch=1, Channels=10, Names=['img_01_r', 'img_01_g', 'img_01_b', 'mask_01', 'mask_02', 'mask_03', 'mask_04', 'mask_05', 'mask_06', 'mask_07']\n  [ComfyUI] [SAM3 Point Collector] CACHE MISS - computing new result for key=d9204c29\n  [ComfyUI] [SAM3 Point Collector] Collected 3 positive, 0 negative points\n  [ComfyUI] [SAM3 Point Collector] Image dimensions: 1280x720\n  [ComfyUI] [SAM3 Point Collector]   Positive point: (426.3, 321.4) -> (0.333, 0.446)\n  [ComfyUI] [SAM3 Point Collector]   Positive point: (417.1, 407.3) -> (0.326, 0.566)\n  [ComfyUI] [SAM3 Point Collector]   Positive point: (431.8, 549.9) -> (0.337, 0.764)\n  [ComfyUI] [SAM3 Point Collector] Output: 3 positive, 0 negative\n  [ComfyUI] [SAM3 Segmentation] Using click-based interactive segmentation\n  [ComfyUI] [SAM3 Segmentation] Image size: (1280, 720)\n  [ComfyUI] [SAM3 Segmentation] sam2_backbone_out is available\n  [ComfyUI] [SAM3 Segmentation] Added 3 positive points\n  [ComfyUI] [SAM3 Segmentation] Points: 3\n  [ComfyUI] [SAM3 Segmentation]   Coords: [[426.27735719657574, 321.42611685978835], [417.13743597288953, 407.3413796907987], [431.76130993078743, 549.9241563039649]]\n  [ComfyUI] [SAM3 Segmentation]   Labels: [1, 1, 1]\n  [ComfyUI] [SAM3 Segmentation] Prediction returned 1 masks\n  [ComfyUI] [SAM3 Segmentation]   Mask shape: (1, 720, 1280)\n  [ComfyUI] [SAM3 Segmentation]   Low-res shape: (1, 288, 288)\n  [ComfyUI] [SAM3 Segmentation]   Scores: [0.9594941735267639]\n  [ComfyUI] [SAM3 Segmentation] Outputting all 1 mask candidates\n  [ComfyUI] [SAM3 Segmentation] Segmentation complete\n  [ComfyUI] [SAM3 Segmentation] Using click-based interactive segmentation\n  [ComfyUI] [SAM3 Segmentation] Image size: (1280, 720)\n  [ComfyUI] [SAM3 Segmentation] sam2_backbone_out is available\n  [ComfyUI] [SAM3 Segmentation] Added 3 positive points\n  [ComfyUI] [SAM3 Segmentation] Points: 3\n  [ComfyUI] [SAM3 Segmentation]   Coords: [[426.27735719657574, 321.42611685978835], [417.13743597288953, 407.3413796907987], [431.76130993078743, 549.9241563039649]]\n  [ComfyUI] [SAM3 Segmentation]   Labels: [1, 1, 1]\n  [ComfyUI] [SAM3 Segmentation] Refinement 1/4, best score: 0.9636\n  [ComfyUI] [SAM3 Segmentation] Refinement 2/4, best score: 0.9690\n  [ComfyUI] [SAM3 Segmentation] Refinement 3/4, best score: 0.9691\n  [ComfyUI] [SAM3 Segmentation] Refinement 4/4, best score: 0.9697\n  [ComfyUI] [SAM3 Segmentation] Prediction returned 1 masks\n  [ComfyUI] [SAM3 Segmentation]   Mask shape: (1, 720, 1280)\n  [ComfyUI] [SAM3 Segmentation]   Low-res shape: (1, 288, 288)\n  [ComfyUI] [SAM3 Segmentation]   Scores: [0.9696518182754517]\n  [ComfyUI] [SAM3 Segmentation] Outputting all 1 mask candidates\n  [ComfyUI] [SAM3 Segmentation] Segmentation complete\n  [ComfyUI] [SAM3 Grounding] Running text-based detection\n  [ComfyUI] [SAM3 Grounding]   Text prompt: 'person'\n  [ComfyUI] [SAM3 Grounding] Confidence threshold: 0.2\n  [ComfyUI] [SAM3 Grounding] Image size: (1280, 720)\n  [ComfyUI] [SAM3 Grounding] Adding text prompt...\n  [ComfyUI] [SAM3 Grounding] No detections found for prompt: 'person' at threshold 0.2\n  [ComfyUI] [SAM3 Grounding] TIP: Try lowering the confidence_threshold or check if the object is in the image\n  [ComfyUI] [SAM3 Multi-Region] CACHE HIT - returning cached result for key=35316a77\n  [ComfyUI] [SAM3 Multiprompt] Image size: (6720, 4480)\n  [ComfyUI] [SAM3 Multiprompt] Processing 7 prompt regions\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 1/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 10, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9808\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 2/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 23, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9411\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 3/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 21, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.8921\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 4/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 1, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9751\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 5/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 1, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9855\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 6/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 13, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9895"
    },
    {
      "file": "frame_008.jpg",
      "time": 108.09,
      "log": "Capturing execution frames: scene_seg.json\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 9 nodes\n  [ComfyUI]   Node 1: LoadImage\n  [ComfyUI]     Inputs: {\"image\": \"image.png\"}\n  [ComfyUI]   Node 3: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"21\", 1]}\n  [ComfyUI]   Node 4: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"21\", 0]}\n  [ComfyUI]   Node 12: LoadSAM3Model\n  [ComfyUI]     Inputs: {\"model_path\": \"models/sam3/sam3.pt\"}\n  [ComfyUI]   Node 20: SAM3MultiRegionCollector\n  [ComfyUI]     Inputs: {\"multi_prompts_store\": \"[{\\\"positive_points\\\":[{\\\"x\\\":5052.74953932266,\\\"y\\\":2847.0600693869637},{\\\"x\\\":4932.510591392486,\\\"y\\\":2953.9413227753366},{\\\"x\\\":4718.752461738845,\\\"y\\\":2967.301479448883},{\n  [ComfyUI]   Node 21: SAM3MultipromptSegmentation\n  [ComfyUI]     Inputs: {\"refinement_iterations\": 2, \"use_multimask\": false, \"offload_model\": false, \"sam3_model\": [\"12\", 0], \"image\": [\"1\", 0], \"multi_prompts\": [\"20\", 0]}\n  [ComfyUI]   Node 22: MultibandFromBatch\n  [ComfyUI]     Inputs: {\"images\": [\"1\", 0], \"masks\": [\"21\", 0]}\n  [ComfyUI]   Node 23: MultibandSave\n  [ComfyUI]     Inputs: {\"file_path\": \"output/multiband\", \"format\": \"npz\", \"multiband\": [\"22\", 0]}\n  [ComfyUI]   Node 24: MultibandPreview\n  [ComfyUI]     Inputs: {\"channel_index\": 0, \"multiband\": [\"22\", 0]}\n  [ComfyUI] Generated prompt_id: ff770ed8-cb4d-43c8-adb3-d5db0f9db961\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] WARNING: 'NoneType' object has no attribute 'shape'\n  [ComfyUI] [SAM3] ComfyUI-SAM3 prestartup script running...\n  [ComfyUI] [SAM3] Script directory: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/custom_nodes/ComfyUI-SAM3\n  [ComfyUI] [SAM3] ComfyUI root: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI\n  [ComfyUI] [SAM3] Copying image assets to /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/input...\n  [ComfyUI] [SAM3] Image assets: 0 copied, 4 skipped\n  [ComfyUI] [SAM3] Prestartup script completed\n  [ComfyUI] [SAM3] ComfyUI-SAM3 v3.0.0 initializing...\n  [ComfyUI] [SAM3] [OK] Registered model folder: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3\n  [ComfyUI] [SAM3] [OK] Node classes imported successfully\n  [ComfyUI] [SAM3 Server] Registered routes: /sam3/prepare, /sam3/detect\n  [ComfyUI] [SAM3] [OK] API endpoints registered\n  [ComfyUI] [SAM3] [OK] Loaded successfully!\n  [ComfyUI] [SAM3] Available nodes: LoadSAM3Model, SAM3Grounding, SAM3Segmentation, SAM3MultipromptSegmentation, SAM3CreateBox, SAM3CreatePoint, SAM3CombineBoxes, SAM3CombinePoints, SAM3VideoSegmentation, SAM3Propagate, SAM3VideoOutput, SAM3PointCollector, SAM3BBoxCollector, SAM3MultiRegionCollector\n  [ComfyUI] [SAM3] Interactive SAM3 Detector: Right-click any IMAGE/MASK node -> 'Open in SAM3 Detector'\n  [ComfyUI] ComfyUI-Multiband loaded: 13 nodes registered\n  [ComfyUI] [SAM3 Multi-Region] CACHE MISS - computing new result for key=35316a77\n  [ComfyUI] [SAM3 Multi-Region] Image dimensions: 6720x4480\n  [ComfyUI] [SAM3 Multi-Region] Processing 7 prompt regions\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 0: 10 pos pts, 0 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 1: 7 pos pts, 16 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 2: 7 pos pts, 14 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 3: 1 pos pts, 0 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 4: 1 pos pts, 0 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 5: 13 pos pts, 0 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 6: 6 pos pts, 0 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region] Output: 7 non-empty prompts\n  [ComfyUI] [SAM3] Load device: cpu, Offload device: cpu\n  [ComfyUI] [SAM3] Model not found at /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3/sam3.pt, downloading from HuggingFace...\n  [ComfyUI] [SAM3] Downloading from 1038lab/sam3...\n  [ComfyUI] [SAM3] Target: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3/sam3.pt\n  [ComfyUI] [SAM3] Model downloaded successfully to: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3/sam3.pt\n  [ComfyUI] [SAM3] Loading unified model from: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3/sam3.pt\n  [ComfyUI] [SAM3] Using BPE tokenizer: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/custom_nodes/ComfyUI-SAM3/nodes/sam3_lib/bpe_simple_vocab_16e6.txt.gz\n  [ComfyUI] [SAM3] Building SAM3 unified model...\n  [ComfyUI] [SAM3] Loading PyTorch checkpoint: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3/sam3.pt\n  [ComfyUI] [SAM3] Added 309 keys for detector.inst_interactive_predictor\n  [ComfyUI] [SAM3] Video predictor loaded successfully\n  [ComfyUI] [SAM3] Creating SAM3 processor...\n  [ComfyUI] [SAM3] Processor created successfully\n  [ComfyUI] [SAM3] Unified model ready (size: 3289.9 MB)\n  [ComfyUI] [SAM3 Multiprompt] Image size: (6720, 4480)\n  [ComfyUI] [SAM3 Multiprompt] Processing 7 prompt regions\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 1/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 10, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9808\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 2/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 23, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9411\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 3/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 21, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.8921\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 4/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 1, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9751\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 5/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 1, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9855\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 6/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 13, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9895\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 7/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 6, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9695\n  [ComfyUI] [SAM3 Multiprompt] Generated 7 masks\n  [ComfyUI] BatchToMultiband: Processed 1 images with 3 channels each -> 3 channels\n  [ComfyUI] BatchToMultiband: Processed 7 masks -> 7 channels\n  [ComfyUI] BatchToMultiband: Output shape torch.Size([1, 10, 4480, 6720]), channels: ['img_01_r', 'img_01_g', 'img_01_b', 'mask_01', 'mask_02', 'mask_03', 'mask_04', 'mask_05', 'mask_06', 'mask_07']\n  [ComfyUI] SaveMultibandImage: Saved to output/multiband.npz\n  [ComfyUI]   Shape: (1, 10, 4480, 6720)\n  [ComfyUI]   Format: npz\n  [ComfyUI] PreviewMultibandImage: Batch=1, Channels=10, Names=['img_01_r', 'img_01_g', 'img_01_b', 'mask_01', 'mask_02', 'mask_03', 'mask_04', 'mask_05', 'mask_06', 'mask_07']\n  [ComfyUI] [SAM3 Point Collector] CACHE MISS - computing new result for key=d9204c29\n  [ComfyUI] [SAM3 Point Collector] Collected 3 positive, 0 negative points\n  [ComfyUI] [SAM3 Point Collector] Image dimensions: 1280x720\n  [ComfyUI] [SAM3 Point Collector]   Positive point: (426.3, 321.4) -> (0.333, 0.446)\n  [ComfyUI] [SAM3 Point Collector]   Positive point: (417.1, 407.3) -> (0.326, 0.566)\n  [ComfyUI] [SAM3 Point Collector]   Positive point: (431.8, 549.9) -> (0.337, 0.764)\n  [ComfyUI] [SAM3 Point Collector] Output: 3 positive, 0 negative\n  [ComfyUI] [SAM3 Segmentation] Using click-based interactive segmentation\n  [ComfyUI] [SAM3 Segmentation] Image size: (1280, 720)\n  [ComfyUI] [SAM3 Segmentation] sam2_backbone_out is available\n  [ComfyUI] [SAM3 Segmentation] Added 3 positive points\n  [ComfyUI] [SAM3 Segmentation] Points: 3\n  [ComfyUI] [SAM3 Segmentation]   Coords: [[426.27735719657574, 321.42611685978835], [417.13743597288953, 407.3413796907987], [431.76130993078743, 549.9241563039649]]\n  [ComfyUI] [SAM3 Segmentation]   Labels: [1, 1, 1]\n  [ComfyUI] [SAM3 Segmentation] Prediction returned 1 masks\n  [ComfyUI] [SAM3 Segmentation]   Mask shape: (1, 720, 1280)\n  [ComfyUI] [SAM3 Segmentation]   Low-res shape: (1, 288, 288)\n  [ComfyUI] [SAM3 Segmentation]   Scores: [0.9594941735267639]\n  [ComfyUI] [SAM3 Segmentation] Outputting all 1 mask candidates\n  [ComfyUI] [SAM3 Segmentation] Segmentation complete\n  [ComfyUI] [SAM3 Segmentation] Using click-based interactive segmentation\n  [ComfyUI] [SAM3 Segmentation] Image size: (1280, 720)\n  [ComfyUI] [SAM3 Segmentation] sam2_backbone_out is available\n  [ComfyUI] [SAM3 Segmentation] Added 3 positive points\n  [ComfyUI] [SAM3 Segmentation] Points: 3\n  [ComfyUI] [SAM3 Segmentation]   Coords: [[426.27735719657574, 321.42611685978835], [417.13743597288953, 407.3413796907987], [431.76130993078743, 549.9241563039649]]\n  [ComfyUI] [SAM3 Segmentation]   Labels: [1, 1, 1]\n  [ComfyUI] [SAM3 Segmentation] Refinement 1/4, best score: 0.9636\n  [ComfyUI] [SAM3 Segmentation] Refinement 2/4, best score: 0.9690\n  [ComfyUI] [SAM3 Segmentation] Refinement 3/4, best score: 0.9691\n  [ComfyUI] [SAM3 Segmentation] Refinement 4/4, best score: 0.9697\n  [ComfyUI] [SAM3 Segmentation] Prediction returned 1 masks\n  [ComfyUI] [SAM3 Segmentation]   Mask shape: (1, 720, 1280)\n  [ComfyUI] [SAM3 Segmentation]   Low-res shape: (1, 288, 288)\n  [ComfyUI] [SAM3 Segmentation]   Scores: [0.9696518182754517]\n  [ComfyUI] [SAM3 Segmentation] Outputting all 1 mask candidates\n  [ComfyUI] [SAM3 Segmentation] Segmentation complete\n  [ComfyUI] [SAM3 Grounding] Running text-based detection\n  [ComfyUI] [SAM3 Grounding]   Text prompt: 'person'\n  [ComfyUI] [SAM3 Grounding] Confidence threshold: 0.2\n  [ComfyUI] [SAM3 Grounding] Image size: (1280, 720)\n  [ComfyUI] [SAM3 Grounding] Adding text prompt...\n  [ComfyUI] [SAM3 Grounding] No detections found for prompt: 'person' at threshold 0.2\n  [ComfyUI] [SAM3 Grounding] TIP: Try lowering the confidence_threshold or check if the object is in the image\n  [ComfyUI] [SAM3 Multi-Region] CACHE HIT - returning cached result for key=35316a77\n  [ComfyUI] [SAM3 Multiprompt] Image size: (6720, 4480)\n  [ComfyUI] [SAM3 Multiprompt] Processing 7 prompt regions\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 1/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 10, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9808\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 2/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 23, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9411\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 3/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 21, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.8921\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 4/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 1, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9751\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 5/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 1, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9855\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 6/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 13, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9895"
    },
    {
      "file": "frame_009.jpg",
      "time": 112.4,
      "log": "Capturing execution frames: scene_seg.json\n  Validating workflow...\n  [ComfyUI] === /validate endpoint called ===\n  [ComfyUI] Received JSON with keys: ['prompt']\n  [ComfyUI] Prompt has 9 nodes\n  [ComfyUI]   Node 1: LoadImage\n  [ComfyUI]     Inputs: {\"image\": \"image.png\"}\n  [ComfyUI]   Node 3: PreviewImage\n  [ComfyUI]     Inputs: {\"images\": [\"21\", 1]}\n  [ComfyUI]   Node 4: MaskPreview\n  [ComfyUI]     Inputs: {\"mask\": [\"21\", 0]}\n  [ComfyUI]   Node 12: LoadSAM3Model\n  [ComfyUI]     Inputs: {\"model_path\": \"models/sam3/sam3.pt\"}\n  [ComfyUI]   Node 20: SAM3MultiRegionCollector\n  [ComfyUI]     Inputs: {\"multi_prompts_store\": \"[{\\\"positive_points\\\":[{\\\"x\\\":5052.74953932266,\\\"y\\\":2847.0600693869637},{\\\"x\\\":4932.510591392486,\\\"y\\\":2953.9413227753366},{\\\"x\\\":4718.752461738845,\\\"y\\\":2967.301479448883},{\n  [ComfyUI]   Node 21: SAM3MultipromptSegmentation\n  [ComfyUI]     Inputs: {\"refinement_iterations\": 2, \"use_multimask\": false, \"offload_model\": false, \"sam3_model\": [\"12\", 0], \"image\": [\"1\", 0], \"multi_prompts\": [\"20\", 0]}\n  [ComfyUI]   Node 22: MultibandFromBatch\n  [ComfyUI]     Inputs: {\"images\": [\"1\", 0], \"masks\": [\"21\", 0]}\n  [ComfyUI]   Node 23: MultibandSave\n  [ComfyUI]     Inputs: {\"file_path\": \"output/multiband\", \"format\": \"npz\", \"multiband\": [\"22\", 0]}\n  [ComfyUI]   Node 24: MultibandPreview\n  [ComfyUI]     Inputs: {\"channel_index\": 0, \"multiband\": [\"22\", 0]}\n  [ComfyUI] Generated prompt_id: ff770ed8-cb4d-43c8-adb3-d5db0f9db961\n  [ComfyUI] Calling execution.validate_prompt()...\n  [ComfyUI] Validation result: valid=True\n  [ComfyUI] === Validation PASSED ===\n  Queuing workflow for execution...\n  [ComfyUI] got prompt\n  [ComfyUI] WARNING: 'NoneType' object has no attribute 'shape'\n  [ComfyUI] [SAM3] ComfyUI-SAM3 prestartup script running...\n  [ComfyUI] [SAM3] Script directory: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/custom_nodes/ComfyUI-SAM3\n  [ComfyUI] [SAM3] ComfyUI root: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI\n  [ComfyUI] [SAM3] Copying image assets to /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/input...\n  [ComfyUI] [SAM3] Image assets: 0 copied, 4 skipped\n  [ComfyUI] [SAM3] Prestartup script completed\n  [ComfyUI] [SAM3] ComfyUI-SAM3 v3.0.0 initializing...\n  [ComfyUI] [SAM3] [OK] Registered model folder: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3\n  [ComfyUI] [SAM3] [OK] Node classes imported successfully\n  [ComfyUI] [SAM3 Server] Registered routes: /sam3/prepare, /sam3/detect\n  [ComfyUI] [SAM3] [OK] API endpoints registered\n  [ComfyUI] [SAM3] [OK] Loaded successfully!\n  [ComfyUI] [SAM3] Available nodes: LoadSAM3Model, SAM3Grounding, SAM3Segmentation, SAM3MultipromptSegmentation, SAM3CreateBox, SAM3CreatePoint, SAM3CombineBoxes, SAM3CombinePoints, SAM3VideoSegmentation, SAM3Propagate, SAM3VideoOutput, SAM3PointCollector, SAM3BBoxCollector, SAM3MultiRegionCollector\n  [ComfyUI] [SAM3] Interactive SAM3 Detector: Right-click any IMAGE/MASK node -> 'Open in SAM3 Detector'\n  [ComfyUI] ComfyUI-Multiband loaded: 13 nodes registered\n  [ComfyUI] [SAM3 Multi-Region] CACHE MISS - computing new result for key=35316a77\n  [ComfyUI] [SAM3 Multi-Region] Image dimensions: 6720x4480\n  [ComfyUI] [SAM3 Multi-Region] Processing 7 prompt regions\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 0: 10 pos pts, 0 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 1: 7 pos pts, 16 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 2: 7 pos pts, 14 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 3: 1 pos pts, 0 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 4: 1 pos pts, 0 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 5: 13 pos pts, 0 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region]   Prompt 6: 6 pos pts, 0 neg pts, 1 pos boxes, 0 neg boxes\n  [ComfyUI] [SAM3 Multi-Region] Output: 7 non-empty prompts\n  [ComfyUI] [SAM3] Load device: cpu, Offload device: cpu\n  [ComfyUI] [SAM3] Model not found at /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3/sam3.pt, downloading from HuggingFace...\n  [ComfyUI] [SAM3] Downloading from 1038lab/sam3...\n  [ComfyUI] [SAM3] Target: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3/sam3.pt\n  [ComfyUI] [SAM3] Model downloaded successfully to: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3/sam3.pt\n  [ComfyUI] [SAM3] Loading unified model from: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3/sam3.pt\n  [ComfyUI] [SAM3] Using BPE tokenizer: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/custom_nodes/ComfyUI-SAM3/nodes/sam3_lib/bpe_simple_vocab_16e6.txt.gz\n  [ComfyUI] [SAM3] Building SAM3 unified model...\n  [ComfyUI] [SAM3] Loading PyTorch checkpoint: /home/runner/work/ComfyUI-SAM3/ComfyUI-SAM3/.comfy-test-env/ComfyUI/models/sam3/sam3.pt\n  [ComfyUI] [SAM3] Added 309 keys for detector.inst_interactive_predictor\n  [ComfyUI] [SAM3] Video predictor loaded successfully\n  [ComfyUI] [SAM3] Creating SAM3 processor...\n  [ComfyUI] [SAM3] Processor created successfully\n  [ComfyUI] [SAM3] Unified model ready (size: 3289.9 MB)\n  [ComfyUI] [SAM3 Multiprompt] Image size: (6720, 4480)\n  [ComfyUI] [SAM3 Multiprompt] Processing 7 prompt regions\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 1/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 10, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9808\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 2/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 23, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9411\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 3/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 21, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.8921\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 4/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 1, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9751\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 5/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 1, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9855\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 6/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 13, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9895\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 7/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 6, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9695\n  [ComfyUI] [SAM3 Multiprompt] Generated 7 masks\n  [ComfyUI] BatchToMultiband: Processed 1 images with 3 channels each -> 3 channels\n  [ComfyUI] BatchToMultiband: Processed 7 masks -> 7 channels\n  [ComfyUI] BatchToMultiband: Output shape torch.Size([1, 10, 4480, 6720]), channels: ['img_01_r', 'img_01_g', 'img_01_b', 'mask_01', 'mask_02', 'mask_03', 'mask_04', 'mask_05', 'mask_06', 'mask_07']\n  [ComfyUI] SaveMultibandImage: Saved to output/multiband.npz\n  [ComfyUI]   Shape: (1, 10, 4480, 6720)\n  [ComfyUI]   Format: npz\n  [ComfyUI] PreviewMultibandImage: Batch=1, Channels=10, Names=['img_01_r', 'img_01_g', 'img_01_b', 'mask_01', 'mask_02', 'mask_03', 'mask_04', 'mask_05', 'mask_06', 'mask_07']\n  [ComfyUI] [SAM3 Point Collector] CACHE MISS - computing new result for key=d9204c29\n  [ComfyUI] [SAM3 Point Collector] Collected 3 positive, 0 negative points\n  [ComfyUI] [SAM3 Point Collector] Image dimensions: 1280x720\n  [ComfyUI] [SAM3 Point Collector]   Positive point: (426.3, 321.4) -> (0.333, 0.446)\n  [ComfyUI] [SAM3 Point Collector]   Positive point: (417.1, 407.3) -> (0.326, 0.566)\n  [ComfyUI] [SAM3 Point Collector]   Positive point: (431.8, 549.9) -> (0.337, 0.764)\n  [ComfyUI] [SAM3 Point Collector] Output: 3 positive, 0 negative\n  [ComfyUI] [SAM3 Segmentation] Using click-based interactive segmentation\n  [ComfyUI] [SAM3 Segmentation] Image size: (1280, 720)\n  [ComfyUI] [SAM3 Segmentation] sam2_backbone_out is available\n  [ComfyUI] [SAM3 Segmentation] Added 3 positive points\n  [ComfyUI] [SAM3 Segmentation] Points: 3\n  [ComfyUI] [SAM3 Segmentation]   Coords: [[426.27735719657574, 321.42611685978835], [417.13743597288953, 407.3413796907987], [431.76130993078743, 549.9241563039649]]\n  [ComfyUI] [SAM3 Segmentation]   Labels: [1, 1, 1]\n  [ComfyUI] [SAM3 Segmentation] Prediction returned 1 masks\n  [ComfyUI] [SAM3 Segmentation]   Mask shape: (1, 720, 1280)\n  [ComfyUI] [SAM3 Segmentation]   Low-res shape: (1, 288, 288)\n  [ComfyUI] [SAM3 Segmentation]   Scores: [0.9594941735267639]\n  [ComfyUI] [SAM3 Segmentation] Outputting all 1 mask candidates\n  [ComfyUI] [SAM3 Segmentation] Segmentation complete\n  [ComfyUI] [SAM3 Segmentation] Using click-based interactive segmentation\n  [ComfyUI] [SAM3 Segmentation] Image size: (1280, 720)\n  [ComfyUI] [SAM3 Segmentation] sam2_backbone_out is available\n  [ComfyUI] [SAM3 Segmentation] Added 3 positive points\n  [ComfyUI] [SAM3 Segmentation] Points: 3\n  [ComfyUI] [SAM3 Segmentation]   Coords: [[426.27735719657574, 321.42611685978835], [417.13743597288953, 407.3413796907987], [431.76130993078743, 549.9241563039649]]\n  [ComfyUI] [SAM3 Segmentation]   Labels: [1, 1, 1]\n  [ComfyUI] [SAM3 Segmentation] Refinement 1/4, best score: 0.9636\n  [ComfyUI] [SAM3 Segmentation] Refinement 2/4, best score: 0.9690\n  [ComfyUI] [SAM3 Segmentation] Refinement 3/4, best score: 0.9691\n  [ComfyUI] [SAM3 Segmentation] Refinement 4/4, best score: 0.9697\n  [ComfyUI] [SAM3 Segmentation] Prediction returned 1 masks\n  [ComfyUI] [SAM3 Segmentation]   Mask shape: (1, 720, 1280)\n  [ComfyUI] [SAM3 Segmentation]   Low-res shape: (1, 288, 288)\n  [ComfyUI] [SAM3 Segmentation]   Scores: [0.9696518182754517]\n  [ComfyUI] [SAM3 Segmentation] Outputting all 1 mask candidates\n  [ComfyUI] [SAM3 Segmentation] Segmentation complete\n  [ComfyUI] [SAM3 Grounding] Running text-based detection\n  [ComfyUI] [SAM3 Grounding]   Text prompt: 'person'\n  [ComfyUI] [SAM3 Grounding] Confidence threshold: 0.2\n  [ComfyUI] [SAM3 Grounding] Image size: (1280, 720)\n  [ComfyUI] [SAM3 Grounding] Adding text prompt...\n  [ComfyUI] [SAM3 Grounding] No detections found for prompt: 'person' at threshold 0.2\n  [ComfyUI] [SAM3 Grounding] TIP: Try lowering the confidence_threshold or check if the object is in the image\n  [ComfyUI] [SAM3 Multi-Region] CACHE HIT - returning cached result for key=35316a77\n  [ComfyUI] [SAM3 Multiprompt] Image size: (6720, 4480)\n  [ComfyUI] [SAM3 Multiprompt] Processing 7 prompt regions\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 1/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 10, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9808\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 2/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 23, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9411\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 3/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 21, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.8921\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 4/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 1, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9751\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 5/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 1, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9855\n  [ComfyUI] [SAM3 Multiprompt] Processing prompt region 6/7\n  [ComfyUI] [SAM3 Multiprompt]   Points: 13, Box: Yes\n  [ComfyUI] [SAM3 Multiprompt]   Mask score: 0.9895"
    },
    {
      "file": "frame_010.jpg",
      "time": 142.3255169391632,
      "log": "Final screenshot"
    }
  ],
  "total_time": 112.64
}